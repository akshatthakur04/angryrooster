<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Help Shape The Drop | Angry Rooster</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Bebas+Neue&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/svg+xml" href="../logo.svg" />
  <link rel="stylesheet" href="../css/styles.css" />
  <style>
    :root { --ink:#0a0a0a; --muted:#666; --border:rgba(0,0,0,0.08); --bg:#ffffff; --accent:#111; }
    body { background:#fff; color:#000; }
    .page { padding-top: 120px; padding-bottom: 80px; }
    .wrap { max-width: 820px; margin: 0 auto; padding: 0 20px; }
    .page-title { font-family:'Bebas Neue', cursive; font-size: clamp(2.2rem,5vw,3.6rem); letter-spacing:2px; margin: 0 0 8px; }
    .page-sub { font-size: 14px; color:#555; line-height:1.6; margin: 0 0 22px; }

    .panel { background:#fff; border:1px solid var(--border); border-radius: 14px; padding: 22px; box-shadow: 0 8px 32px rgba(0,0,0,0.05); }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .field { display:flex; flex-direction:column; gap:8px; }
    .label { font-size:12px; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:#222; }
    .input, .select, .textarea { width:100%; padding: 14px 14px; border:1px solid var(--border); border-radius:12px; font-size:14px; background:#fafafa; transition: border-color .2s ease, background .2s ease, box-shadow .2s ease; }
    .input:focus, .select:focus, .textarea:focus { outline:none; border-color: rgba(0,0,0,0.25); background:#fff; box-shadow: 0 4px 16px rgba(0,0,0,0.06); }
    .textarea { min-height: 140px; resize: vertical; }
    .help { font-size:12px; color:#777; }
    .counter { font-size:12px; color:#777; text-align:right; }

    .stars { display:flex; gap:8px; align-items:center; }
    .star-input { display:none; }
    .star { width:30px; height:30px; display:inline-flex; align-items:center; justify-content:center; border:1px solid var(--border); border-radius:8px; cursor:pointer; background:#fafafa; transition:all .2s ease; }
    .star svg { width:16px; height:16px; color:#bbb; transition: color .2s ease; }
    .star-input:checked + .star, .star:hover { border-color:#111; background:#fff; }
    .star-input:checked + .star svg { color:#111; }

    .actions { margin-top: 16px; display:flex; gap:10px; align-items:center; }
    .btn { padding:14px 18px; border-radius:12px; border:1px solid rgba(0,0,0,0.2); background:#0a0a0a; color:#fff; font-size:12px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; cursor:pointer; transition:transform .2s ease, box-shadow .2s ease, background .2s ease; }
    .btn:hover { transform: translateY(-1px); box-shadow:0 8px 24px rgba(0,0,0,0.15); }
    .btn[disabled] { opacity:.6; cursor:not-allowed; transform:none; }
    .status { font-size:12px; color:#444; min-height:18px; }
    .status.success { color:#15803d; }
    .status.error { color:#b91c1c; }

    .aside { margin-top: 22px; font-size:12px; color:#666; }
    @media (max-width: 768px) { .page { padding-top: 110px; padding-bottom: 60px; } .row { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="navbar" id="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <a href="../main.html" class="nav-link">Home</a>
        <a href="about.html" class="nav-link">About</a>
      </div>
      <div class="nav-center">
        <a href="../main.html" class="logo-link"><img src="../logo.svg" alt="Angry Rooster" class="logo" /></a>
      </div>
      <div class="nav-right">
        <a href="performance.html" class="nav-link">Products</a>
      </div>
    </div>
  </nav>

  <main class="page">
    <div class="wrap">
      <header>
        <h1 class="page-title">Help Shape The Drop</h1>
        <p class="page-sub">We actually read this stuff. Whether it’s your first hoodie from us or your tenth, your feedback helps us design, fit, and deliver better gear every time.</p>
      </header>

      <section class="panel" aria-labelledby="feedbackTitle">
        <h2 id="feedbackTitle" class="visually-hidden" style="position:absolute;left:-9999px">Feedback Form</h2>
        <form id="feedbackForm" novalidate>
          <div class="row">
            <div class="field">
              <label for="name" class="label">Name <span class="help">(optional)</span></label>
              <input id="name" name="name" type="text" class="input" autocomplete="name" />
            </div>
            <div class="field">
              <label for="email" class="label">Email <span class="help">(optional)</span></label>
              <input id="email" name="email" type="email" class="input" autocomplete="email" />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="type" class="label">Type of feedback</label>
              <select id="type" name="type" class="select" required>
                <option value="" disabled selected>Select one</option>
                <option>Product Quality</option>
                <option>Fit & Sizing</option>
                <option>Website Experience</option>
                <option>Delivery</option>
                <option>Other</option>
              </select>
            </div>
            <div class="field">
              <label class="label">Rating</label>
              <div class="stars" role="radiogroup" aria-label="Rating">
                <input class="star-input" type="radio" name="rating" id="r1" value="1" />
                <label for="r1" class="star" aria-label="1 star"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></label>
                <input class="star-input" type="radio" name="rating" id="r2" value="2" />
                <label for="r2" class="star" aria-label="2 stars"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></label>
                <input class="star-input" type="radio" name="rating" id="r3" value="3" />
                <label for="r3" class="star" aria-label="3 stars"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></label>
                <input class="star-input" type="radio" name="rating" id="r4" value="4" />
                <label for="r4" class="star" aria-label="4 stars"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></label>
                <input class="star-input" type="radio" name="rating" id="r5" value="5" checked />
                <label for="r5" class="star" aria-label="5 stars"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></label>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="message" class="label">Message</label>
            <textarea id="message" name="message" class="textarea" maxlength="800" placeholder="Be honest. What should we tweak, improve, or build next?" required></textarea>
            <div class="counter" id="counter">0 / 800</div>
          </div>

          <div class="actions">
            <button id="sendBtn" type="submit" class="btn">Send Feedback</button>
            <div id="status" class="status" aria-live="polite"></div>
          </div>
        </form>
        <p class="aside">Your thoughts help shape our next drops. Thanks for taking a minute.</p>
      </section>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/supabase-config.local.js"></script>
  <script>
    const form = document.getElementById('feedbackForm');
    const messageEl = document.getElementById('message');
    const counterEl = document.getElementById('counter');
    const statusEl = document.getElementById('status');
    const sendBtn = document.getElementById('sendBtn');

    messageEl.addEventListener('input', () => {
      counterEl.textContent = `${messageEl.value.length} / ${messageEl.maxLength}`;
    });

    function getRating() { const el = document.querySelector('input[name="rating"]:checked'); return el ? Number(el.value) : null; }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.className = 'status';
      statusEl.textContent = '';

      const payload = {
        name: document.getElementById('name').value.trim() || null,
        email: document.getElementById('email').value.trim() || null,
        type: document.getElementById('type').value,
        message: messageEl.value.trim(),
        rating: getRating(),
        created_at: new Date().toISOString()
      };

      if (!payload.type || !payload.message) {
        statusEl.textContent = 'Please select a type and add a short message.';
        statusEl.classList.add('error');
        return;
      }

      try {
        if (typeof supabaseClient === 'undefined') {
          statusEl.textContent = 'Feedback saved locally. Connect Supabase to store it.';
          statusEl.classList.add('success');
          form.reset();
          counterEl.textContent = '0 / 800';
          return;
        }
        sendBtn.disabled = true;
        statusEl.textContent = 'Sending...';

        const { error } = await supabaseClient
          .from('user_feedback')
          .insert(payload);

        if (error) throw error;
        statusEl.textContent = 'Got it. Thanks for helping us level up. 🐓';
        statusEl.classList.add('success');
        form.reset();
        counterEl.textContent = '0 / 800';
      } catch (err) {
        statusEl.textContent = 'Could not send feedback. Please try again.';
        statusEl.classList.add('error');
      } finally {
        sendBtn.disabled = false;
      }
    });
  </script>
  <script src="../js/main.js"></script>
</body>
</html>


